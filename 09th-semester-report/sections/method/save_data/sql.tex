\subsection{SQL}\label{subsec:sql}

SQL makes a lot of sense to use when working with structured data, where it enables the user to process the data later in an optimized manner. The structure of the data can be seen in \cref{fig:uml_diagram}, and is used for two things during the experiments. The first thing is to capture the results, where a connection to the database will be made after each run of the experiments, to upload to data. The connection is then shut down again, before the next run, to avoid using energy on this, which could affect the results. The relevant components for capturing results from \cref*{fig:uml_diagram} are as following:

\begin{itemize}
    \item Test case: Represents what test program was used in the experiment through a unique ID and a name.
    \item Measuring instrument: Represents what measuring instrument was used in the experiment through a unique ID and name
    \item DUT: Represents which hardware specifications the test case was executed on through a unique ID, name, operating system and version\feetnote{The version is to separate different versions of the framework. Meaning each time a change is made to the framework, the version increments.}. 
    \item RawData: Represents the output from the measuring instrument, in the experiment. This is represented through a unique ID, an experiment ID, a value and the date of execution. The value here is a serialized object representing the data, as the different measuring instruments had different formats in their output.
    \item Configuration: Represents what configuration was used during the experiments. Here min/max temp and battery represent the limits the system had to exceed before the results were no longer useful, and a system restart and cooldown period are required. Between represents the cooldown period between two test case runs in minutes, and duration specifies the minimum duration the test case had to run for denoted in minutes. This is also represented through a unique ID.
    \item Measurement: Represents a measurement made on the system during the experiments. The measurement is represented through a unique ID, an experiment ID, a time, a type, a name and a value. Here the name is the sensor name e.g. 'CORE \#1', and the type is more general like 'CpuTemperature'. This table is made general so both battery, temperatures and others can fit in the same table.
    \item Experiment: The experiment ties all other tables together, where one experiment is represented with a unique ID, configuration ID, measuring instrument ID, DUT ID, test case ID, the programming language and start/end times. This enables one experiment to have multiple measurements, one program to be used in several experiments etc. In addition to this, runs represent how many times the test case is executed in order to run for at least the configurations duration value, and iteration represents how many times the test case has been measured at the given point in time, by the given measuring instrument since the last restart of the computer. This is relevant for the R3-Validation, where for the first ABC, the iteration will be 1 for all measuring instruments, the second BCA will be 2 etc.
\end{itemize}

The second use case for the data is to save the state of the program upon a restart. This is relevant for R3-Validation, where after each restart, a new measuring instrument needs to start. The relevant tables for this are as follows:

\begin{itemize}
    \item Test case: Same definition as before
    \item DUT: Same definition as before
    \item Run: Represents what measuring instrument was the first measuring instrument last time an experiment was run on for a given test case on a given DUT. This is represented using a unique run ID, a test case ID and a DUT ID. In addition to this is the value, which represents the different measuring instruments used in the experiment, and which one started last time.
\end{itemize}

\input{figures/sql_uml_diagram.tex}