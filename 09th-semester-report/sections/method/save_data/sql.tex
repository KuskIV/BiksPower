\subsection{SQL}\label{subsec:sql}

SQL makes a lot of sense to use when working with structured data, where it enables the user to process the data later in an optimized manner. The structure of the data can be seen in \cref{fig:uml_diagram}, and is used for two things during the experiments. The first thing is to capture the results, where a connection to the database will be made after each run of the experiments, to upload to data. The connection is then shut down again, before the next run, in order to avoid using energy on this, which could affect the results. The relevant components for capturing results from \cref*{fig:uml_diagram} are as following:

\begin{itemize}
    \item Program: Represents what test program was used in the experiment through a unique ID and a name.
    \item Profiler: Represents what energy profiler was used in the experiment through a unique ID and name
    \item System: Represents what system the experiment was executed on through an unique ID, name, operating system and version\feetnote{The version is to separate different versions of the framework. Meaning each time a change is made to the framework, the version increments.}. 
    \item RawData: Represents the output from the profiler, in the experiment. This is represented through a unique ID, and experiment ID, a value and the date of execution. The value here is a serialized object representing the data, as the different profilers had different formats in their output.
    \item Configuration: Represents what configuration was used during the experiments. Here min/max temp and battery represents the limits the system had to exceed before the results were no longer useful, and a system restart and cooldown period required. Between represents the cooldown period between two test program runs in minutes, and duration specifies the minimum duration the test program had to run for in minutes. This is also represented through an unique ID.
    \item Temperature: Represents a temperature measurement made on the system during the experiments. The measurement is represented through an unique ID, and experiment ID, a time, name and value. Here the name is the sensorname, for example 'CORE \#1'.
    \item Experiment: The experiment ties all other tables together, where for one experiment is represented with an unique ID, configuration ID, profiler ID, system ID, program ID, the programming language and start/end times. This enables one experiment to have multiple temperature measurings, one program to be used in several experiments ect. In addition to this, runs represents how many times the test program executed in order to run for at least the configurations duration value, and iteration represents how many times the test programs has been measured at the given point in time, by the given profiler since the last restart of the computer. This is relevant for the R3-Validation, where for the first ABC, the iteration will be 1 for all profilers, the second BCA will be 2 ect.
\end{itemize}

The second usecase for the data, is to save the state of the program upon a restart. This is relevant for R3-Validation, where after each restart, a new profiler needs to start. The relevant tables for this is as follows:

\begin{itemize}
    \item Program: Same definition as before
    \item System: Same definition as before
    \item Run: Represents what profiler was the first profiler last time an experiment was run on for a given test program on a given system. This is represented using a unique run ID, a program ID and a system ID. In addition to this is the value, which represents the different profilers used in the experiment, and which one started last time.
\end{itemize}

\input{figures/sql_uml_diagram.tex}