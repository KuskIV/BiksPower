\subsection{Measurement Methodology} \label[]{Measure_meth}
When conducting the experiments three different kinds of measuring approaches are being utilized from the tools in \cref{sec:hardware}.
The first is hardware measurements, which are system-level physical measurements. Another approach is RAPL, Libre Hardware Monitor, Intel Power Gadget and sometimes E3, where measurements are performed using on-chip sensors. Lastly, there are energy predictive models, which are utilized by E3, when there is no power meter chip in the DUT.\todo{We could remove this from here as it should be described in a previous section.} There is however some uncertainty about how E3 works, but this will be covered later.\todo{What where?} Of these three approaches, the most accurate is the system-level physical measurements which can provide highly accurate measurements for the DUT's energy consumption, but these measurements are for the entire DUT, so they cannot provide a view of the power consumption of applications on an individual level, which the E3 can do. It is however not necessary to get a per-application energy consumption, as only the test cases' energy consumption is to be calculated, dynamic energy consumption can solve this. Dynamic energy consumption is an estimation of the application's power consumption. To calculate the dynamic energy consumption $E_D$, as presented by Fahad et al \cite{fahad2019comparative}, the following formula is used:
$$E_D = E_T -(P_S * T_E)$$
Where $E_T$ is the total energy consumption by the DUT when running the experiment, $T_E$ is the duration of the program execution and $P_S$ is the energy consumption when the DUT is idle. The dynamic energy consumption will then represent the energy consumption of the test case. To do this a certain amount of control over the DUT is required and some precautions are necessary. The procedures that will be used are different for the DUTs and OSes, but some will be the same for all DUTs as shown here:\cite*{fahad2019comparative}

\begin{itemize}
    \item The machines are reserved exclusively for the experiments, this is to prevent deviations in the results.
    \item The networking will be disabled on the machines to ensure that these do not affect the results.
    \item The processes and the temperature of the machines will be measured before and after each experiment.
    \item After each batch, the DUT will be restarted and its setup phase is performed before continuing to the next batch.
    \item The memory of the test cases\todo{Hvordan ved vi det?} will not exceed the DUT's main memory to avoid memory swapping
    \item Some baseline power usage will be established by measurements before and after the experiments
\end{itemize}

Each batch will be tested on every DUT with each type of OS these being Windows 10 and Ubuntu.
The specifications for the different DUT vary, both in age, hardware specifications and manufacturer, this is done to get a wider scope of tests to see if certain measurements work better on certain DUTs. For the experiment one desktop workstation and two laptops will be used. The specs for the workstation can be seen in \cref{tab:komplett}, the Surface Pro 4 can be seen in \cref{tab:surfacePro} and Surface Book can be seen in \cref*{tab:surfaceBook}. Comparing these will help evaluate the different measuring methods for the different DUTs, and provide insight into why they may or may not differ in performance.


Each DUT will have a slightly different setup depending on the hardware and the OS of the DUT. For the Windows and Linux machines, the various unnecessary background processes will be disabled to ensure as little noise in the measurements as possible\cite*[]{sestoft2013microbenchmarks}, the specific process disabled can be seen in \todo[]{Fine out which should be shut off}. A difference between the DUTs is if whether they are desktops or laptops. On the desktop it is possible to perform system-level physical measurements because the measurement is system-wide it is important to have as little non test case related power fluctuation as possible, this is why the fans of the DUT will be set to max on the workstation. For the laptops, this is not an issue as the measurements do not include the whole system. For the laptops, some special controls are necessary for the measurements because measurement quality can become worse if the laptops are connected to the charger during measurements\cite{E3Video}. To prevent this the charger is shut off during the experiments, and then turned on to fully recharge the DUT during the setup phase, this cycle will repeat until all of the experiments are done.
