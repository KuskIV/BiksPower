% How to measure the energy consumption of code

\section{Measure Energy Consumption of Code}\label[section]{sec:measure_energy}

When measuring the energy consumption of a test case, there exists various different ways of proceeding. In the work by Hackenberg et al.\cite*[]{Hackenberg2013} Intelligent Platform Management Interface (IMPI) based platforms like power supplies with measurement features, model-based interfaces like RAPL or APM and physical measurements including AC and DC are compared, with an aim of uncovering aspects of accuracy, temporal resolution and measurement overhead.

Here it is noted that Intel's RAPL has previously been shown to be reasonably accurate, and is deemed a viable alternative to physical measurements\cite*[]{Dongarra2012,Hackenberg2013}.\todo[]{Jeppe write this when you have presented the paper}



% When measuring the energy consumption of a process, different energy profilers exist that have been used in existing work. One popular approach is model-based power consumption estimators provided by x86 microprocessors, including Intel's RAPL for intel chips, and Application Power Management (APM) for AMD.

% \todo{I think this sentence is weird.}Work exists for RAPL, here it is deemed a viable alternative to physical measurements, where it consistently under-estimates\cite[]{Dongarra2012, Hackenberg2013}, but it does have some limitations, as RAPL values are not physical measurements, it is rather based on modelling approach\cite[]{Hackenberg2013}. Another limitation is how RAPL returns energy data and not power data. Because of this, the average update interval is used as timestamps for each update, and this value is assumed to be accurate enough.\cite[]{Hackenberg2013}

% When considering APM, it is reasonably accurate but suffers from for example systematic inaccuracies most likely caused by novelty of the interface.\cite[]{Hackenberg2013}


% When measuring the energy consumption using hardware, it can be done on either AC or DC. When measuring AC, the measuring device is located between the power supply and the electrical outlet, and for DC it is from the power supply to the system.\cite[]{Hackenberg2013} Another hardware approach could also be using the Watts Up Pro power consumption meter, also used in multiple works as it has a very high accuracy of $1.5\%$.\cite[]{Jagroep2015}\nytafsnit

%% Intel Energy Checker SDK
%% Application Power Management for AMD


%% FEETINGS: Framework for Energy Efficiency Testing to Improve Environmental Goal of the Software:


Garcia et al. found that there are three types of problems that occur in the domain of evaluating software's energy consumption.\cite{GarciaFEETINGS} 
\begin{enumerate}
    \item There are inconsistencies in the terminology, with different terms being used for the same concept or even the same term being used for different concepts. This lack of consistency hurts the understanding of the subject.
    \item There is no agreed-upon methodology, which makes it difficult to compare and replicate results.
    \item Choosing the correct measuring instruments that are fitting for the particular experiment evaluation.
\end{enumerate}

To solve these problems they created \textit{Framework for Energy Efficiency Testing to Improve Environmental Goals of the Software} (FEETINGS). FEETINGS consist of three main components which aim to solve these issues. These are the Conceptual component, Methodological component and Technological component.\cite{GarciaFEETINGS}\nytafsnit

%\input{tabels/TerminologyTable.tex}
\todo{Check terminology is consistent}

The Conceptual component provides an extension of the work by Garcia et al.\cite{GarciaSMO} which defines Software Measurement Ontology. This extension is called Green Software Measurement Ontology (GSMO) and provides terminology and the corresponding definitions to help authors describe their process with a specified terminology. This should help readers understand and compare results from different papers. The Methodological component is a process called Green Software Measurement Process (GSMP) which are guidelines to assist with the study design, analysis and presenting the results presented in phases. There are seven phases described as follows by Garcia et al\cite*{GarciaFEETINGS}
\begin{enumerate}
    \item \textit{"Scope Definition"}: A requirements specification for evaluation of the results are made and the test cases are chosen.
    \item \textit{"Measurement Environment Setting"}: The DUT is chosen as well as the measuring instruments. The baseline measurements should also be acquired in this phase.
    \item \textit{"Measurement Environment Preparation"}: Preparation of environment
    \item \textit{"Perform the measurements"}: Experiment is conducted and data is recorded. 
    \item \textit{"Test Case Data analysis"}: The data is processed and analyzed. Here outliers can be found and a sanity check of the results is done.
    \item \textit{"Software Entity Data analysis"}: Conclusions about the experiments are started from the analysis in the previous step.
    \item \textit{"Reporting the results"}: Here the process of the study is documented, as well as the results. 
\end{enumerate} 

Garcia et al.\cite*{GarciaFEETINGS} claims that the methodological component aides in giving more reliable and consistent measurements which in turn should make them more comparable and replicable. 

The Technological component consists of two parts. The first part is the Energy Efficiency Tester (EET) which is a hardware-based approach to measuring energy consumption. It is presented by Garcia et al.\cite*{GarciaEET}

The second part is called ELLIOT, which is a software-based tool which handles the data provided by EET with the main goal of providing a visual representation that can be used to process, analyze and construct graphs and tables of the data collected by the EET.\cite{GarciaFEETINGS}

%In this work, the Conceptual components providing the terminology will be followed with some additional terminology from other work and our own as shown in \cref{tab:feetTable}\nytafsnit

