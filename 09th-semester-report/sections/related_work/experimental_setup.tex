% When running the experiments, what code is best to test a language

\section{Experimental Setup}

When running experiments on energy consumption of hardware, it is not straight forward, as many factors can impact the experiment. This is covered in the work by Sestof\cite*[]{sestoft2013microbenchmarks}, where it is noted how it is especially aparent in modern systems, with increased complexity. This is especially clear on managed execution platforms like the Common Language Infrastructure (.Net) from Microsoft or the Java Virtual Machine (JVM) where software in an intermediate from is compiled to real machine code at runtime by just-in-time (JIT) compilation.

Sestof\cite*[]{sestoft2013microbenchmarks} notes the impact of how many times the code is run, as the JIT first of all has some start-up overhead, and as it uses adaptive optimization to quickly generate code for code only run a few times, and spend more time on code run many times. The JIT compilation also tries to avoid to spend too much time on analysis, which can results in code which is optimized for certain simpler context, might not perform well in more complex situations. An additional observation is what impact the garbage collection has on performance, as it can choose to run at any time, which can affect the measurements in a negative manner. Because if this, measurings with short execution times is argued to be insufficient. 



%% benchmarking c# for energy consumption Ã¸rsted nielsen


Bokhari et al\cite{Bokhari2020r3} found that when running benchmarks comparing different variants of the same program on Android systems, noise had an impact on the results. This was due to noise coming from several uncontrollable factors. Firstly the systems software states meaning the background processes which could not be fully controlled during the execution of the experiments. Secondly the memory consumption of the Android system and background processes. Thirdly the battery voltage, because even though the system was fully charged at the starting point as well as the remaining voltage level after. To solve this they propose a method called \textit{R3-VALIDATION} which is a rotated round-robin approach to running the program variants, which ensures more fair execution conditions. In this approach the variants (A, B, C) are rotated as follows: setup, ABC, ABC, setup, BCA, BCA, setup, CAB, CAB. Where the setup phase is a restart, initialization and recharge of the system. They achieved more consistent system states from this approach.