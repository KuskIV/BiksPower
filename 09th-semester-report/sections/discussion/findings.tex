\section{Findings}

This part of the discussion is about the different results covered in \cref{ch:results}.

\paragraph*{Energy consumption of Windows:} When comparing measurements made on Windows and Linux on the clamp, different conclusions can be made in experiments \#1 and \#2. In \#1, the energy consumption was in most cases higher on Windows, as can be seen in \cref{sec:iterations}, where the energy consumption over time was analyzed. This is the opposite of what was found by Najmuddin et al.\cite[]{Najmuddin2021}. Because of this, the second experiment was conducted, where the C-states were disabled, as was covered in \cref{sec:disable_c_states_exp}. In this experiment, the dynamic energy consumption of Windows decreased, while it remained the same for Linux, which shows two things. This first of all means we have the same conclusion as Najmuddin et al.\cite[]{Najmuddin2021}, but it also shows how the conclusion made by Najmuddin et al.\cite[]{Najmuddin2021} could be correct. The conclusion stated that the energy consumption on Linux is higher compared to Windows because of a lack of well-written drivers for Linux and based on the results of our work, it seems like Linux is unable to utilize the different C-states within a CPU from the motherboard. For Linux, they appear to be set through the OS, as the measurements remained the same when they were disabled or enabled. Some improvements were however seen on Linux for the second experiment, as the clamp had a much lower standard deviation.

\paragraph*{Experiment \#1:} In the first experiment, a few observations were made resulting in the second experiment. This was because of very low observed energy consumption for the idle test case and higher energy consumption on windows compared to Linux. The low energy consumption is different from the expected energy consumption presented in \cref{subsec:expec_energy_consumption}, and the lower energy consumption on Linux did not match the findings by Najmuddin et al.\cite[]{Najmuddin2021} The question is therefore whether the results from the first experiments should be disregarded. In this case, it is argued that the measurements can still be used, but only for comparisons within the same OS. The measurements will still give an indication of which profiler provides the highest measurement and how close they are to a ground truth etc. The measurements can however not be used to compare measurements from different OSs, as Experiment \#2 illustrated how disabling the C-states affected the Windows and Linux differently, as was covered in \cref{sec:disable_c_states_exp}. Experiment \#1 can therefore be concluded to be useful for finding patterns, but it should be noted the measurements are too high based on Experiment \#2.
%% can these values be used for anything?

\paragraph*{Experiment \#2:} In the second experiment, the C-state was disabled to get a more realistic idle case. In this context, it can be discussed what can be, and cannot be considered realistic. For this, we consider what the idle case is used for. The idle case measurements were subtracted from the measurements for the other test cases to isolate the energy consumption for only the test case. Because of this, we needed all test cases to be in the same C-state as the idle test case, as other C-states would impact energy consumption. Through observations, energy measurements also changed from experiment \#1 to experiment \#2, indicating the idle test case was not the only test case impacted by the C-states. This is a result of the different test cases having different workloads on the CPU. It could be argued that a more realistic setting would be to show the actual energy consumption, and let the CPU enter the C-states it finds fitting for the workload. However, in our work, we valued the dynamic energy consumption higher, where an idle energy consumption is required, as all measuring instruments except E3 measure the energy consumption for either the entire CPU or DUT. And for the dynamic energy to be calculated, a static C-state is required.

%% are these more realistic with C-states disabled 