\section{Measuring instruments}

The first section of the discussion will cover the different measuring instruments used. This will be done by first discussing them independently, in terms of ease of use etc., before all measuring instruments will be compared.

\paragraph*{Open Hardware Monitor / Libre Hardware Monitor:} One issue with LHM is the sampling rate. It was found in \cref{sec:rw_key_takeaways} that using the same sampling rate for the measuring instruments is beneficial when attempting to compare them. However, during some initial testing with LHM, it was found that using a sampling rate of more than 2 Hz would frequently produce errors. Therefore a frequency of 2 Hz is used during the experiments with LHM, whereas the other measuring instruments use a frequency of 10 Hz. A decision was made to not limit the other measuring instruments to the maximum frequency of LHM and instead accept that it could be a disadvantage with LHM. Besides this, the library was easy to use, as it was a C\# library easy to import and use. The only thing it lacked was documentation.

\paragraph*{Intel Power Gadget:} In terms of using the measuring instruments, Intel Power Gadget was the most promising. This tool had official documentation and an API making it very user-friendly. The issues came when executing on the Surface Book, where it crashed for unknown reasons. The exact extent of why these crashes occur and what devices it occurs on is unknown but is something to explore in the future.

\paragraph*{E3:} This measuring instrument was based on the numbers provided by Microsoft, presented in \cref{subsec:e3}, very promising. However, when using the tool, some issues arose. This was first of all regarding the usecase. For the other measuring instruments, they could either be started and stopped as wished, or the energy consumption could be read. This was different for E3, where you could start it, but since it only performed a measurement once a minute, it was vital to know when E3 did this, to be sure the energy consumption read was for the whole duration of one minute. Since no official documentation was found this was a difficult task and meant we had to rely on blog posts. The claims found regarding the MAXIM chip which was the reason why the Surface Book was used, are also 7 years old by the time of writing this and do not seem to exist in any Surface devices since 2016, which could be speculated that they either do not work as great as Microsoft claimed or because they were too expensive to implement. For E3, the measurements were in most cases close to those made by IPG and LHM, which indicated it performed similarly compared to the other measuring instruments. Given that E3 could isolate the energy consumption of each process running on the DUT, it could have been interesting to see how well this isolation was. An experiment could have been conducted where E3 measurements on an idle DUT were compared to E3 measurements when the DUT did some background work. However, this was not prioritized and is therefore a subject for future work. For E3, it is noted in \cref{subsec:e3} how E3 claims to work best when it is not connected to a charger. It would be interesting to try and compare E3 measurements where E3 was and was connected to a charger, to see how this would affect the results. This is however also a subject for future work.


\paragraph*{Clamp:} When considering the results from the first experiment presented in \cref{ch:results}, the clamp was observed to have a very high uncertainty compared to the other measuring instruments. The issue with the clamp compared to the other measuring instruments is how it measures the energy consumption of the entire system compared to just the CPU. Because of this, many factors can impact the measurements. To minimize the variability the fan speed was set to maximum and the external GPU was removed. Furthermore, dynamic energy consumption was implemented to isolate the energy consumption from specifically running a test case by removing the energy consumption of the fans etc.


\paragraph*{RAPL:} This measuring instrument was similar to LHM and IPG in terms of usability. It also had some documentation, which was useful. RAPL has the advantage of not being required to install anything, it just works when installing Linux.

\paragraph*{Summary:} In this work five different measuring instruments have been used and if the use case is to measure the energy consumption of software, most of them worked as you would expect it. The only exception to this was E3, as it required the test case to run for one minute, but it was on the other hand the only measuring instrument able to separate the different processes running, rather than only presenting the energy consumption of the entire CPU. 